<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Basedly">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#FF1493">
    <meta name="description" content="Plan luxury shopping trips with friends and discover together">
    <meta name="keywords" content="social shopping, luxury, friends, planning, trips">
    <meta name="author" content="Basedly">
    <meta property="og:title" content="Basedly - Social Shopping Planning">
    <meta property="og:description" content="Plan shopping trips with friends">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://lux-app.com/social">
    <meta property="og:image" content="https://lux-app.com/assets/og-image.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Basedly - Social Shopping Planning">
    <meta name="twitter:description" content="Plan shopping trips with friends">
    
    <title>Basedly - Social Shopping Planning</title>
    
    <link rel="stylesheet" href="./output.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&display=swap" rel="stylesheet">
    <link rel="apple-touch-icon" href="./assets/app-icon-180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/favicon-16x16.png">
    <link rel="manifest" href="./manifest.json">
    
    <style>
        :root {
            --lux-hot-pink: #FFABDF;
            --lux-beige: #F5F5DC;
            --lux-black: #000;
            --lux-white: #fff;
            --lux-dark-gray: #111;
        }
        
        body, html {
            font-family: 'Space Grotesk', Arial, sans-serif;
        }
        
        .nav-logo, .brand-title, h1, h2, h3 {
            font-family: 'Space Grotesk', Arial, sans-serif;
            letter-spacing: 2px;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .lux-fade-in {
            animation: fadeIn 0.6s ease-in-out;
        }
        
        .lux-button {
            background: var(--lux-hot-pink);
            color: var(--lux-white);
            border: 2px solid var(--lux-hot-pink);
            padding: 16px 32px;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        .lux-button:hover {
            background: var(--lux-beige);
            color: var(--lux-black);
            border-color: var(--lux-beige);
        }
        
        .lux-button-secondary {
            background: var(--lux-black);
            color: var(--lux-beige);
            border: 2px solid var(--lux-beige);
            padding: 16px 32px;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        .lux-button-secondary:hover {
            background: var(--lux-beige);
            color: var(--lux-black);
        }
        
        .lux-input {
            background: var(--lux-black);
            border: 2px solid var(--lux-hot-pink);
            color: var(--lux-white);
            padding: 16px;
            font-size: 16px;
            width: 100%;
            margin-bottom: 16px;
            border-radius: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        .lux-input:focus {
            outline: none;
            border-color: var(--lux-beige);
        }
        
        .trip-card {
            background: var(--lux-dark-gray);
            border: 2px solid var(--lux-hot-pink);
            padding: 24px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .trip-card:hover {
            border-color: var(--lux-beige);
            transform: translateY(-2px);
        }
        
        .friend-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--lux-hot-pink);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--lux-white);
            font-weight: bold;
            font-size: 16px;
        }
        
        /* iOS Optimizations */
        @media (max-width: 768px) {
            nav {
                padding: 8px 0 !important;
            }
            
            nav > div {
                padding: 0 16px !important;
            }
            
            nav > div > div:first-child {
                font-size: 24px !important;
                letter-spacing: 2px !important;
            }
            
            nav > div > div:last-child {
                gap: 12px !important;
            }
            
            nav > div > div:last-child > a {
                font-size: 11px !important;
                padding: 6px 8px !important;
                letter-spacing: 0.5px !important;
            }
            
            .main-content {
                padding: 20px 16px !important;
            }
            
            .trip-grid {
                grid-template-columns: 1fr !important;
                gap: 20px !important;
            }
            
            .friend-list {
                flex-direction: column !important;
                gap: 12px !important;
            }
        }
        
        @media (max-width: 480px) {
            nav > div > div:last-child {
                gap: 8px !important;
            }
            
            nav > div > div:last-child > a {
                font-size: 10px !important;
                padding: 4px 6px !important;
            }
            
            .main-content {
                padding: 16px 12px !important;
            }
            
            .trip-card {
                padding: 16px !important;
            }
            
            .lux-button, .lux-button-secondary {
                padding: 14px 24px !important;
                font-size: 14px !important;
            }
        }
        
        /* iOS Safe Area Support */
        @supports (padding: max(0px)) {
            nav {
                padding-left: max(12px, env(safe-area-inset-left));
                padding-right: max(12px, env(safe-area-inset-right));
            }
            
            .main-content {
                padding-left: max(20px, env(safe-area-inset-left));
                padding-right: max(20px, env(safe-area-inset-right));
                padding-top: max(40px, env(safe-area-inset-top));
                padding-bottom: max(40px, env(safe-area-inset-bottom));
            }
        }
        
        /* iOS momentum scrolling */
        .ios-scroll {
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }
        
        /* Prevent zoom on input focus */
        input, textarea, select { font-size: 16px !important; }
        
        /* iOS button tap highlight removal */
        button, a {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
        }
        
        /* iOS-specific animations */
        @media (prefers-reduced-motion: no-preference) {
            .ios-animate {
                transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }
        }
    </style>
</head>
<body>
    <!-- iOS-Optimized Navigation -->
    <nav style="padding: 12px 0; border-bottom: 2px solid var(--lux-hot-pink); background: rgba(0,0,0,0.95); backdrop-filter: blur(10px); position: sticky; top: 0; z-index: 100; -webkit-backdrop-filter: blur(10px);">
        <div style="display: flex; align-items: center; justify-content: space-between; max-width: 1200px; margin: 0 auto; padding: 0 20px;">
            <a href="index.html" style="font-size: 28px; font-weight: 900; color: var(--lux-hot-pink); text-transform: uppercase; letter-spacing: 3px; text-decoration: none;">BASEDLY</a>
            
            <div style="display: flex; align-items: center; gap: 16px;">
                <a href="discovery.html" style="color: var(--lux-white); text-decoration: none; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; font-size: 12px; padding: 6px 8px; transition: all 0.3s ease; -webkit-tap-highlight-color: transparent;" onclick="navigateToDiscovery()">DISCOVERY</a>
                <a href="deals.html" style="color: var(--lux-white); text-decoration: none; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; font-size: 12px; padding: 6px 8px; transition: all 0.3s ease; -webkit-tap-highlight-color: transparent;" onclick="navigateToDeals()">DEALS</a>
                <a href="messages.html" style="color: var(--lux-white); text-decoration: none; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; font-size: 12px; padding: 6px 8px; transition: all 0.3s ease; -webkit-tap-highlight-color: transparent;" onclick="navigateToMessages()">MESSAGES</a>
                <a href="social.html" style="color: var(--lux-hot-pink); text-decoration: none; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; font-size: 12px; padding: 6px 8px; border-bottom: 2px solid var(--lux-hot-pink); transition: all 0.3s ease; -webkit-tap-highlight-color: transparent;" onclick="navigateToSocial()">PLAN</a>
                <a href="fashion-nooks.html" style="color: var(--lux-white); text-decoration: none; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; font-size: 12px; padding: 6px 8px; transition: all 0.3s ease; -webkit-tap-highlight-color: transparent;" onclick="navigateToFashionNooks()">üõçÔ∏è NOOKS</a>
                <a href="member.html" style="color: var(--lux-white); text-decoration: none; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; font-size: 12px; padding: 6px 8px; transition: all 0.3s ease; -webkit-tap-highlight-color: transparent;" onclick="navigateToMember()">MEMBER</a>
                
                <!-- Authentication Section -->
                <div class="auth-button sign-in-button" style="display: flex; align-items: center;">
                    <a href="login.html" style="color: var(--lux-hot-pink); text-decoration: none; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; font-size: 12px; padding: 6px 8px; transition: all 0.3s ease; -webkit-tap-highlight-color: transparent;">SIGN IN</a>
                </div>
                
                <!-- User Menu (shown when logged in) -->
                <div class="user-menu" style="display: none; align-items: center; gap: 12px;">
                    <div class="user-avatar" style="display: none; cursor: pointer;" onclick="navigateToProfile()">
                        <!-- User avatar will be populated by AuthManager -->
                    </div>
                    <button class="sign-out-button" onclick="signOut()" style="background: none; border: none; color: var(--lux-hot-pink); font-weight: 600; text-transform: uppercase; letter-spacing: 1px; font-size: 12px; padding: 6px 8px; cursor: pointer; transition: all 0.3s ease;">SIGN OUT</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content ios-scroll" style="background: var(--lux-black); min-height: 100vh; padding: 40px 20px;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <!-- Header -->
            <div style="text-align: center; margin-bottom: 60px;">
                <h1 style="font-size: 48px; color: var(--lux-beige); font-weight: 900; margin-bottom: 24px; letter-spacing: 3px;">SOCIAL PLANNING</h1>
                <p style="font-size: 20px; color: var(--lux-white); margin-bottom: 40px; letter-spacing: 1px; opacity: 0.9;">Plan shopping trips with friends and discover together</p>
            </div>
            
            <!-- Create New Trip Section -->
            <div style="background: var(--lux-dark-gray); border: 2px solid var(--lux-hot-pink); padding: 40px; margin-bottom: 60px;">
                <h2 style="font-size: 32px; color: var(--lux-hot-pink); font-weight: 900; margin-bottom: 32px; text-align: center; letter-spacing: 2px;">CREATE SHOPPING TRIP</h2>
                
                <!-- Simplified Trip Form -->
                <div style="max-width: 600px; margin: 0 auto;">
                    <!-- Trip Details -->
                    <div style="margin-bottom: 32px;">
                        <h3 style="color: var(--lux-white); font-size: 20px; font-weight: 700; margin-bottom: 16px;">TRIP DETAILS</h3>
                        <div style="display: grid; gap: 16px;">
                            <input type="text" id="trip-name" placeholder="Trip Name (e.g., Chanel Shopping Day)" class="lux-input" style="font-size: 16px; padding: 16px 20px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                                <input type="date" id="trip-date" class="lux-input" style="font-size: 16px; padding: 16px 20px;">
                                <input type="text" id="trip-location" placeholder="Location (e.g., SoHo, NYC)" class="lux-input" style="font-size: 16px; padding: 16px 20px;">
                            </div>
                            <textarea id="trip-description" placeholder="Description (optional)" class="lux-input" style="height: 80px; resize: none; font-size: 16px; padding: 16px 20px; font-family: inherit;"></textarea>
                        </div>
                    </div>
                    
                    <!-- Store Destinations -->
                    <div style="margin-bottom: 32px;">
                        <h3 style="color: var(--lux-white); font-size: 20px; font-weight: 700; margin-bottom: 16px;">STORE DESTINATIONS</h3>
                        <div id="store-list" style="margin-bottom: 16px;">
                            <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                                <input type="text" id="store-1" placeholder="Store 1 (e.g., Chanel Boutique)" class="lux-input" style="flex: 1; font-size: 16px; padding: 16px 20px;">
                                <button onclick="removeStore(1)" style="background: var(--lux-hot-pink); color: var(--lux-white); border: none; padding: 16px 20px; cursor: pointer; font-size: 16px; font-weight: 600; min-width: 50px;">√ó</button>
                            </div>
                            <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                                <input type="text" id="store-2" placeholder="Store 2 (e.g., Balenciaga)" class="lux-input" style="flex: 1; font-size: 16px; padding: 16px 20px;">
                                <button onclick="removeStore(2)" style="background: var(--lux-hot-pink); color: var(--lux-white); border: none; padding: 16px 20px; cursor: pointer; font-size: 16px; font-weight: 600; min-width: 50px;">√ó</button>
                            </div>
                            <div style="display: flex; gap: 12px; margin-bottom: 12px;">
                                <input type="text" id="store-3" placeholder="Store 3 (e.g., Saint Laurent)" class="lux-input" style="flex: 1; font-size: 16px; padding: 16px 20px;">
                                <button onclick="removeStore(3)" style="background: var(--lux-hot-pink); color: var(--lux-white); border: none; padding: 16px 20px; cursor: pointer; font-size: 16px; font-weight: 600; min-width: 50px;">√ó</button>
                            </div>
                        </div>
                        <button class="lux-button-secondary" onclick="addStore()" style="width: 100%; padding: 16px 20px; font-size: 16px; margin-bottom: 0;">‚ûï ADD STORE</button>
                    </div>
                    
                    <!-- Invite Friends -->
                    <div style="margin-bottom: 32px;">
                        <h3 style="color: var(--lux-white); font-size: 20px; font-weight: 700; margin-bottom: 16px;">INVITE FRIENDS</h3>
                        <div id="friend-list" class="friend-list" style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 20px;">
                            <!-- Friends will be populated by JavaScript -->
                        </div>
                        <button class="lux-button-secondary" onclick="inviteFriends()" style="width: 100%; padding: 16px 20px; font-size: 16px;">INVITE FRIENDS</button>
                    </div>
                </div>
                
                <!-- Create Button -->
                <div style="text-align: center; margin-top: 40px;">
                    <button class="lux-button" onclick="createTrip()" style="padding: 20px 40px; font-size: 18px; font-weight: 700; letter-spacing: 2px;">CREATE TRIP</button>
                </div>
            </div>
            
            <!-- Active Trips -->
            <div style="margin-bottom: 60px;">
                <h2 style="font-size: 32px; color: var(--lux-beige); font-weight: 900; margin-bottom: 32px; text-align: center; letter-spacing: 2px;">ACTIVE TRIPS</h2>
                
                <div id="active-trips" class="trip-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 24px;">
                    <!-- Trips will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Upcoming Events -->
            <div style="margin-bottom: 60px;">
                <h2 style="font-size: 32px; color: var(--lux-hot-pink); font-weight: 900; margin-bottom: 32px; text-align: center; letter-spacing: 2px;">UPCOMING EVENTS</h2>
                
                <div id="upcoming-events" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px;">
                    <!-- Events will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- Social Features -->
            <div style="background: var(--lux-dark-gray); border: 2px solid var(--lux-beige); padding: 40px; text-align: center; margin-bottom: 40px;">
                <h2 style="font-size: 32px; color: var(--lux-beige); font-weight: 900; margin-bottom: 32px; letter-spacing: 2px;">SOCIAL PLANNING FEATURES</h2>
                <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 40px;">
                    <!-- Group Chat & Planning -->
                    <div style="flex: 1 1 260px; min-width: 260px; max-width: 340px; background: var(--lux-black); border: 2px solid var(--lux-hot-pink); border-radius: 12px; padding: 32px 24px; margin-bottom: 0; display: flex; flex-direction: column; align-items: center; box-shadow: 0 2px 16px 0 rgba(255,171,223,0.08);">
                        <div style="width: 60px; height: 60px; background: var(--lux-hot-pink); margin-bottom: 20px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                            <span style="color: var(--lux-white); font-size: 28px;">üí¨</span>
                        </div>
                        <h3 style="color: var(--lux-white); font-size: 20px; font-weight: 700; margin-bottom: 12px;">GROUP PLANNING</h3>
                        <p style="color: var(--lux-beige); font-size: 15px; opacity: 0.85; line-height: 1.5;">Coordinate trips, chat, and share plans with your shopping group in real time.</p>
                    </div>
                    <!-- AI-Powered Routes -->
                    <div style="flex: 1 1 260px; min-width: 260px; max-width: 340px; background: var(--lux-black); border: 2px solid var(--lux-beige); border-radius: 12px; padding: 32px 24px; margin-bottom: 0; display: flex; flex-direction: column; align-items: center; box-shadow: 0 2px 16px 0 rgba(245,245,220,0.08);">
                        <div style="width: 60px; height: 60px; background: var(--lux-beige); margin-bottom: 20px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                            <span style="color: var(--lux-black); font-size: 28px;">üó∫Ô∏è</span>
                        </div>
                        <h3 style="color: var(--lux-white); font-size: 20px; font-weight: 700; margin-bottom: 12px;">AI ROUTES</h3>
                        <p style="color: var(--lux-beige); font-size: 15px; opacity: 0.85; line-height: 1.5;">Get optimized shopping routes and schedules for your group, powered by AI.</p>
                    </div>
                    <!-- Calendar Sync -->
                    <div style="flex: 1 1 260px; min-width: 260px; max-width: 340px; background: var(--lux-black); border: 2px solid var(--lux-hot-pink); border-radius: 12px; padding: 32px 24px; margin-bottom: 0; display: flex; flex-direction: column; align-items: center; box-shadow: 0 2px 16px 0 rgba(255,171,223,0.08);">
                        <div style="width: 60px; height: 60px; background: var(--lux-hot-pink); margin-bottom: 20px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                            <span style="color: var(--lux-white); font-size: 28px;">üìÖ</span>
                        </div>
                        <h3 style="color: var(--lux-white); font-size: 20px; font-weight: 700; margin-bottom: 12px;">CALENDAR SYNC</h3>
                        <p style="color: var(--lux-beige); font-size: 15px; opacity: 0.85; line-height: 1.5;">Sync shopping events and plans directly to your calendar and with friends.</p>
                    </div>
                    <!-- Deal & Plan Sharing -->
                    <div style="flex: 1 1 260px; min-width: 260px; max-width: 340px; background: var(--lux-black); border: 2px solid var(--lux-beige); border-radius: 12px; padding: 32px 24px; margin-bottom: 0; display: flex; flex-direction: column; align-items: center; box-shadow: 0 2px 16px 0 rgba(245,245,220,0.08);">
                        <div style="width: 60px; height: 60px; background: var(--lux-beige); margin-bottom: 20px; display: flex; align-items: center; justify-content: center; border-radius: 50%;">
                            <span style="color: var(--lux-black); font-size: 28px;">ü§ù</span>
                        </div>
                        <h3 style="color: var(--lux-white); font-size: 20px; font-weight: 700; margin-bottom: 12px;">SHARE PLANS & DEALS</h3>
                        <p style="color: var(--lux-beige); font-size: 15px; opacity: 0.85; line-height: 1.5;">Easily share your trip plans and exclusive deals with your group or friends.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="./components/utils/AuthManager.js"></script>
    <script>
        // Initialize auth manager
        document.addEventListener('DOMContentLoaded', function() {
            if (window.authManager) {
                window.authManager.updateAuthUI();
            }
        });
        
        // Sample data
        let friends = [
            { id: 1, name: "Sarah", avatar: "S" },
            { id: 2, name: "Mike", avatar: "M" },
            { id: 3, name: "Emma", avatar: "E" },
            { id: 4, name: "Alex", avatar: "A" },
            { id: 5, name: "Lisa", avatar: "L" }
        ];

        let activeTrips = [
            {
                id: 1,
                name: "Chanel VIP Shopping",
                date: "2024-01-15",
                location: "SoHo, NYC",
                description: "Exclusive access to new collection",
                friends: [1, 2, 3],
                status: "active",
                stores: ["Chanel Boutique", "Balenciaga"],
                isFavorite: false
            },
            {
                id: 2,
                name: "Balenciaga Private Sale",
                date: "2024-01-18",
                location: "Beverly Hills",
                description: "Invitation-only seasonal sale",
                friends: [2, 4, 5],
                status: "active",
                stores: ["Balenciaga"],
                isFavorite: false
            }
        ];

        let upcomingEvents = [
            {
                id: 1,
                name: "Chanel VIP Shopping Event",
                date: "Jan 15, 2024",
                location: "SoHo, NYC",
                description: "Exclusive access to new collection",
                attendees: 12
            },
            {
                id: 2,
                name: "Balenciaga Private Sale",
                date: "Jan 18, 2024",
                location: "Beverly Hills",
                description: "Invitation-only seasonal sale",
                attendees: 8
            },
            {
                id: 3,
                name: "Cartier Jewelry Showcase",
                date: "Jan 20, 2024",
                location: "Madison Avenue",
                description: "Limited edition pieces on display",
                attendees: 15
            }
        ];

        // Share specific trip by ID
        function shareTripById(tripId) {
            const trip = activeTrips.find(t => t.id === tripId);
            if (!trip) return;
            
            const tripDetails = `Trip: ${trip.name}\nDate: ${trip.date}\nLocation: ${trip.location}\nDescription: ${trip.description}\nStores: ${trip.stores ? trip.stores.join(', ') : 'None specified'}\nFriends: ${trip.friends ? trip.friends.join(', ') : 'None invited'}`;

            if (navigator.share) {
                navigator.share({
                    title: `Join my shopping trip: ${trip.name}`,
                    text: `Join me for shopping on ${trip.date} in ${trip.location}! ${trip.stores && trip.stores.length > 0 ? `Stores: ${trip.stores.join(', ')}` : ''}`,
                    url: window.location.href
                });
            } else {
                alert(`Share this trip:\n\n${tripDetails}`);
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            renderTrips();
            loadFriends();
        });

        // Load friends
        function loadFriends() {
            const friendList = document.getElementById('friend-list');
            friendList.innerHTML = '';
            
            friends.forEach(friend => {
                const friendElement = document.createElement('div');
                friendElement.className = 'friend-avatar';
                friendElement.textContent = friend.avatar;
                friendElement.title = friend.name;
                friendElement.onclick = () => toggleFriendSelection(friend.id);
                friendList.appendChild(friendElement);
            });
        }

        // Load active trips
        function loadActiveTrips() {
            const tripsContainer = document.getElementById('active-trips');
            tripsContainer.innerHTML = '';
            
            activeTrips.forEach(trip => {
                const tripCard = createTripCard(trip);
                tripsContainer.appendChild(tripCard);
            });
        }

        // Create trip card
        function createTripCard(trip) {
            const card = document.createElement('div');
            card.className = 'trip-card lux-fade-in';
            
            const tripFriends = friends.filter(friend => trip.friends.includes(friend.id));
            const friendAvatars = tripFriends.map(friend => 
                `<div class="friend-avatar" style="width: 30px; height: 30px; font-size: 12px;">${friend.avatar}</div>`
            ).join('');
            
            card.innerHTML = `
                <div style="display: flex; justify-content: between; align-items: flex-start; margin-bottom: 16px;">
                    <h3 style="color: var(--lux-white); font-size: 20px; font-weight: 700; margin: 0; flex: 1;">${trip.name}</h3>
                    <span style="background: var(--lux-hot-pink); color: var(--lux-white); padding: 4px 8px; font-size: 10px; font-weight: bold; text-transform: uppercase;">${trip.status}</span>
                </div>
                
                <p style="color: var(--lux-white); font-size: 14px; margin-bottom: 12px; opacity: 0.8;">${trip.description}</p>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <div>
                        <p style="color: var(--lux-white); font-size: 14px; font-weight: 600; margin: 0;">üìÖ ${trip.date}</p>
                        <p style="color: var(--lux-white); font-size: 14px; opacity: 0.8; margin: 0;">üìç ${trip.location}</p>
                    </div>
                    <div style="display: flex; gap: 4px;">
                        ${friendAvatars}
                    </div>
                </div>
                
                <div style="display: flex; gap: 12px;">
                    <button class="lux-button" style="flex: 1; padding: 12px; font-size: 12px;" onclick="viewTripDetails(${trip.id})">VIEW DETAILS</button>
                    <button class="lux-button-secondary" style="flex: 1; padding: 12px; font-size: 12px;" onclick="shareTrip(${trip.id})">SHARE</button>
                </div>
            `;
            
            return card;
        }

        // Load upcoming events
        function loadUpcomingEvents() {
            const eventsContainer = document.getElementById('upcoming-events');
            eventsContainer.innerHTML = '';
            
            upcomingEvents.forEach(event => {
                const eventCard = createEventCard(event);
                eventsContainer.appendChild(eventCard);
            });
        }

        // Create event card
        function createEventCard(event) {
            const card = document.createElement('div');
            card.className = 'trip-card lux-fade-in';
            
            card.innerHTML = `
                <h3 style="color: var(--lux-white); font-size: 18px; font-weight: 700; margin-bottom: 12px;">${event.name}</h3>
                <p style="color: var(--lux-white); font-size: 14px; margin-bottom: 8px; opacity: 0.8;">${event.description}</p>
                
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <div>
                        <p style="color: var(--lux-white); font-size: 14px; font-weight: 600; margin: 0;">üìÖ ${event.date}</p>
                        <p style="color: var(--lux-white); font-size: 14px; opacity: 0.8; margin: 0;">üìç ${event.location}</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="color: var(--lux-hot-pink); font-size: 14px; font-weight: 600; margin: 0;">üë• ${event.attendees} attending</p>
                    </div>
                </div>
                
                <div style="display: flex; gap: 12px;">
                    <button class="lux-button" style="flex: 1; padding: 12px; font-size: 12px;" onclick="joinEvent(${event.id})">JOIN EVENT</button>
                    <button class="lux-button-secondary" style="flex: 1; padding: 12px; font-size: 12px;" onclick="shareEvent(${event.id})">SHARE</button>
                </div>
            `;
            
            return card;
        }

        // Toggle friend selection
        function toggleFriendSelection(friendId) {
            const friendElement = event.target;
            if (friendElement.classList.contains('selected')) {
                friendElement.classList.remove('selected');
                friendElement.style.background = 'var(--lux-hot-pink)';
                friendElement.style.color = 'var(--lux-white)';
            } else {
                friendElement.classList.add('selected');
                friendElement.style.background = 'var(--lux-beige)';
                friendElement.style.color = 'var(--lux-black)';
            }
        }

        // Create new trip
        function createTrip() {
            const name = document.getElementById('trip-name').value;
            const date = document.getElementById('trip-date').value;
            const location = document.getElementById('trip-location').value;
            const description = document.getElementById('trip-description').value;
            
            if (!name || !date || !location) {
                console.log('Please fill in all required fields');
                return;
            }
            
            // Get store destinations
            const storeInputs = document.querySelectorAll('#store-list input[type="text"]');
            const stores = Array.from(storeInputs)
                .map(input => input.value.trim())
                .filter(store => store.length > 0);
            
            // Get selected friends
            const selectedFriends = Array.from(document.querySelectorAll('.friend-avatar.selected'))
                .map(friend => friend.querySelector('span').textContent);
            
            const newTrip = {
                id: Date.now(),
                name,
                date,
                location,
                description,
                stores,
                friends: selectedFriends,
                status: 'upcoming',
                isFavorite: false
            };
            
            activeTrips.unshift(newTrip);
            renderTrips();
            
            // Clear form
            document.getElementById('trip-name').value = '';
            document.getElementById('trip-date').value = '';
            document.getElementById('trip-location').value = '';
            document.getElementById('trip-description').value = '';
            
            // Clear store inputs
            storeInputs.forEach(input => input.value = '');
            
            // Clear friend selection
            document.querySelectorAll('.friend-avatar.selected').forEach(friend => {
                friend.classList.remove('selected');
            });
            
            showNotification('Trip created successfully! ‚ú®');
        }

        // Invite friends
        function inviteFriends() {
            console.log('Invite friends functionality');
        }

        // View trip details
        function viewTripDetails(tripId) {
            const trip = activeTrips.find(t => t.id === tripId);
            console.log('Trip details:', trip);
        }

        // Share trip
        function shareTrip() {
            const tripName = document.getElementById('trip-name').value;
            const tripDate = document.getElementById('trip-date').value;
            const tripLocation = document.getElementById('trip-location').value;
            const tripDescription = document.getElementById('trip-description').value;
            
            // Get store destinations
            const storeInputs = document.querySelectorAll('#store-list input[type="text"]');
            const stores = Array.from(storeInputs)
                .map(input => input.value.trim())
                .filter(store => store.length > 0);
            
            // Get selected friends
            const selectedFriends = Array.from(document.querySelectorAll('.friend-avatar.selected'))
                .map(friend => friend.querySelector('span').textContent);

            if (!tripName || !tripDate || !tripLocation) {
                console.log('Please fill in trip details before sharing');
                return;
            }

            const tripDetails = `Trip: ${tripName}\nDate: ${tripDate}\nLocation: ${tripLocation}\nDescription: ${tripDescription}\nStores: ${stores.join(', ')}\nFriends: ${selectedFriends.join(', ')}`;

            if (navigator.share) {
                navigator.share({
                    title: `Join my shopping trip: ${tripName}`,
                    text: `Join me for shopping on ${tripDate} in ${tripLocation}! ${stores.length > 0 ? `Stores: ${stores.join(', ')}` : ''}`,
                    url: window.location.href
                });
            } else {
                console.log('Trip shared:', tripDetails);
            }
        }

        // Join event
        function joinEvent(eventId) {
            const event = upcomingEvents.find(e => e.id === eventId);
            alert(`You've joined: ${event.name}\n\nDate: ${event.date}\nLocation: ${event.location}\n\nWe'll send you updates and reminders!`);
        }

        // Share event
        function shareEvent(eventId) {
            const event = upcomingEvents.find(e => e.id === eventId);
            if (navigator.share) {
                navigator.share({
                    title: `Join this event: ${event.name}`,
                    text: `Join us for ${event.name} on ${event.date} in ${event.location}!`,
                    url: window.location.href
                });
            } else {
                alert(`Share this event: ${event.name}\n\nDate: ${event.date}\nLocation: ${event.location}`);
            }
        }

        // Add store destination
        function addStore() {
            const storeList = document.getElementById('store-list');
            const newStoreDiv = document.createElement('div');
            newStoreDiv.style.display = 'flex';
            newStoreDiv.style.gap = '8px';
            newStoreDiv.style.marginBottom = '8px';

            const storeInput = document.createElement('input');
            storeInput.type = 'text';
            storeInput.placeholder = 'New Store (e.g., Gucci)';
            storeInput.className = 'lux-input';
            storeInput.style.flex = '1';

            const removeButton = document.createElement('button');
            removeButton.textContent = '√ó';
            removeButton.onclick = () => removeStore(storeList.children.length);
            removeButton.style.background = 'var(--lux-hot-pink)';
            removeButton.style.color = 'var(--lux-white)';
            removeButton.style.border = 'none';
            removeButton.style.padding = '8px 12px';
            removeButton.style.cursor = 'pointer';
            removeButton.style.fontSize = '12px';

            newStoreDiv.appendChild(storeInput);
            newStoreDiv.appendChild(removeButton);
            storeList.appendChild(newStoreDiv);
        }

        // Remove store destination
        function removeStore(index) {
            const storeList = document.getElementById('store-list');
            const storeDiv = storeList.children[index - 1]; // Adjust index for new elements
            storeDiv.remove();
        }

        // Render trips
        function renderTrips() {
            const container = document.getElementById('active-trips');
            container.innerHTML = '';
            
            activeTrips.forEach(trip => {
                const tripCard = document.createElement('div');
                tripCard.className = 'trip-card';
                tripCard.style.cssText = `
                    background: var(--lux-dark-gray);
                    border: 2px solid var(--lux-hot-pink);
                    padding: 32px;
                    margin-bottom: 32px;
                    position: relative;
                `;
                
                const statusBadge = trip.status === 'active' ? 'üü¢ ACTIVE' : '‚è∞ UPCOMING';
                const statusColor = trip.status === 'active' ? 'var(--lux-beige)' : 'var(--lux-hot-pink)';
                
                tripCard.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 24px;">
                        <div>
                            <h3 style="color: var(--lux-white); font-size: 24px; font-weight: 900; margin-bottom: 8px;">${trip.name}</h3>
                            <p style="color: var(--lux-beige); font-size: 16px; margin-bottom: 4px;">üìÖ ${trip.date}</p>
                            <p style="color: var(--lux-beige); font-size: 16px; margin-bottom: 8px;">üìç ${trip.location}</p>
                            ${trip.description ? `<p style="color: var(--lux-white); font-size: 14px; margin-bottom: 16px;">${trip.description}</p>` : ''}
                        </div>
                        <span style="background: ${statusColor}; color: var(--lux-black); padding: 8px 16px; font-size: 12px; font-weight: 700; border-radius: 4px;">${statusBadge}</span>
                    </div>
                    
                    ${trip.stores && trip.stores.length > 0 ? `
                        <div style="margin-bottom: 20px;">
                            <h4 style="color: var(--lux-white); font-size: 16px; font-weight: 700; margin-bottom: 12px;">üè™ STORE DESTINATIONS</h4>
                            <div style="display: flex; flex-wrap: wrap; gap: 8px;">
                                ${trip.stores.map(store => `
                                    <span style="background: var(--lux-hot-pink); color: var(--lux-white); padding: 6px 12px; font-size: 12px; border-radius: 4px;">${store}</span>
                                `).join('')}
                            </div>
                        </div>
                    ` : ''}
                    
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; gap: 12px;">
                            ${trip.friends && trip.friends.length > 0 ? `
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="color: var(--lux-beige); font-size: 14px;">üë• ${trip.friends.length} friends</span>
                                    <div style="display: flex; gap: 4px;">
                                        ${trip.friends.slice(0, 3).map(friend => `
                                            <div style="width: 24px; height: 24px; background: var(--lux-hot-pink); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; color: var(--lux-white);">${friend.charAt(0)}</div>
                                        `).join('')}
                                        ${trip.friends.length > 3 ? `<div style="width: 24px; height: 24px; background: var(--lux-beige); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 10px; color: var(--lux-black);">+${trip.friends.length - 3}</div>` : ''}
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                        
                        <div style="display: flex; gap: 12px;">
                            <button onclick="shareTripById(${trip.id})" class="lux-button-secondary" style="padding: 8px 16px; font-size: 12px;">üì§ SHARE TRIP</button>
                            <button onclick="joinTrip(${trip.id})" class="lux-button" style="padding: 8px 16px; font-size: 12px;">JOIN</button>
                        </div>
                        
                        <div style="text-align: center; margin-top: 12px;">
                            <button class="favorite-btn" onclick="toggleTripFavorite(${trip.id})" style="background: none; border: none; font-size: 20px; cursor: pointer; padding: 4px; transition: all 0.3s ease;">
                                ${trip.isFavorite ? '‚ù§Ô∏è' : 'ü§ç'}
                            </button>
                        </div>
                    </div>
                `;
                
                container.appendChild(tripCard);
            });
        }

        // Toggle trip favorite
        function toggleTripFavorite(tripId) {
            const trip = activeTrips.find(t => t.id === tripId);
            if (trip) {
                trip.isFavorite = !trip.isFavorite;
                renderTrips(); // Re-render to update the heart icon
                showNotification(trip.isFavorite ? 'Trip added to favorites! üíñ' : 'Trip removed from favorites! ‚ùå');
            }
        }

        // Check if trip is favorited
        function isTripFavorited(tripId) {
            const trip = activeTrips.find(t => t.id === tripId);
            return trip ? trip.isFavorite : false;
        }

        // Navigation functions (example)
        function navigateToDiscovery() {
            window.location.href = 'discovery.html';
        }

        function navigateToDeals() {
            window.location.href = 'deals.html';
        }

        function navigateToMessages() {
            window.location.href = 'messages.html';
        }

        function navigateToSocial() {
            window.location.href = 'social.html';
        }

        function navigateToFashionNooks() {
            window.location.href = 'fashion-nooks.html';
        }

        function navigateToMember() {
            window.location.href = 'member.html';
        }
    </script>
</body>
</html> 